import { Callout } from "vocs/components";

# Examples

This guide covers a few examples of how to use the library.

## Custom Tevm client

For greater control over the EVM environment, provide your own Tevm client; this is the recommended usage.

See [the Tevm documentation](https://www.tevm.sh/) for [how to create and configure the client](https://node.tevm.sh/core/create-tevm-node).

```typescript twoslash
import { createMemoryClient, http } from "tevm";
import { mainnet } from "tevm/common";
import { traceState } from "@polareth/evmstate";

// Create a fork client
// [!include ~/snippets/client-fork.ts:client-fork]

// [!include ~/snippets/trace-state.ts:options-client]
```

Benefits of using a custom client:

- Configure specific fork point
- Reuse the same client for multiple operations
- More control over the simulation environment

## Processing complex outputs

<Callout type="tip">
  See the [playground](/playground) for an interactive demonstration of the output based on function calls.
</Callout>

:::code-group

```ts twoslash [example.ts]
// [!include ~/snippets/abi.ts:mappings]
// [!include ~/snippets/layout.ts:mappings]
// [!include ~/snippets/client.ts]
// ---cut---
import { watchState, PathSegmentKind, type StateChange } from "@polareth/evmstate";

// [!include ~/snippets/watch-state.ts:watchState-logs-onStateChange]

// [!include ~/snippets/watch-state.ts:watchState-logs-subscribe /unsubscribe2/unsubscribe/]
```

```ts twoslash [layout.ts]
// [!include ~/snippets/layout.ts:mappings]
```

```ts twoslash [abi.ts]
// [!include ~/snippets/abi.ts:mappings]
```

```ts twoslash [client.ts]
// [!include ~/snippets/client.ts]
```

:::
