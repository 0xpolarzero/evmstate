// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Mappings > ... even with a ridiculously nested mapping 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 10000000000000000000n,
      "modified": true,
      "next": 9999999999999676446n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": true,
      "next": 1,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "ridiculouslyNestedMapping": {
        "kind": "mapping",
        "name": "ridiculouslyNestedMapping",
        "trace": [
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "ridiculouslyNestedMapping[0xAD00000000000000000000000000000000000000][0xad11111111111111111111111111111111111111][0xAd22222222222222222222222222222222222222][0xAD33333333333333333333333333333333333333]",
            "modified": true,
            "next": {
              "decoded": 1000n,
              "hex": "0x00000000000000000000000000000000000000000000000000000000000003e8",
            },
            "path": [
              {
                "key": "0xAD00000000000000000000000000000000000000",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "key": "0xad11111111111111111111111111111111111111",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "key": "0xAd22222222222222222222222222222222222222",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "key": "0xAD33333333333333333333333333333333333333",
                "keyType": "address",
                "kind": "mapping_key",
              },
            ],
            "slots": [
              "0xcc703d258a591255f2eeef403037661696d14a444c67289f433faadeef9e787e",
            ],
          },
        ],
        "type": "mapping(address => mapping(address => mapping(address => mapping(address => uint256))))",
      },
    },
  },
}
`;

exports[`Mappings > should trace complex mapping operations with multiple keys 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 9999999999999375355n,
      "modified": true,
      "next": 9999999999999184164n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 1,
      "modified": true,
      "next": 2,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "userInfo": {
        "kind": "mapping",
        "name": "userInfo",
        "trace": [
          {
            "current": {
              "decoded": 100n,
              "hex": "0x0000000000000000000000000000000000000000000000000000000000000064",
            },
            "fullExpression": "userInfo[0x0000000000000000000000000000000000000002].balance",
            "modified": true,
            "next": {
              "decoded": 300n,
              "hex": "0x000000000000000000000000000000000000000000000000000000000000012c",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "kind": "struct_field",
                "name": "balance",
              },
            ],
            "slots": [
              "0xc3a24b0501bd2c13a7e57f2db4369ec4c223447539fc0724a9d55ac4a06ebd4d",
            ],
          },
          {
            "current": {
              "decoded": 100n,
              "hex": "0x0000000000000000000000000000000000000000000000000000000000000064",
            },
            "fullExpression": "userInfo[0x0000000000000000000000000000000000000002].lastUpdate",
            "modified": true,
            "next": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "kind": "struct_field",
                "name": "lastUpdate",
              },
            ],
            "slots": [
              "0xc3a24b0501bd2c13a7e57f2db4369ec4c223447539fc0724a9d55ac4a06ebd4e",
            ],
          },
        ],
        "type": "mapping(address => struct Mappings.UserInfo)",
      },
    },
  },
}
`;

exports[`Mappings > should trace mapping to an array 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 10000000000000000000n,
      "modified": true,
      "next": 9999999999999535200n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": true,
      "next": 1,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "purchases": {
        "kind": "mapping",
        "name": "purchases",
        "trace": [
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "purchases[1]._length",
            "modified": true,
            "next": {
              "decoded": 1n,
              "hex": "0x01",
            },
            "path": [
              {
                "key": 1n,
                "keyType": "uint256",
                "kind": "mapping_key",
              },
              {
                "kind": "array_length",
                "name": "_length",
              },
            ],
            "slots": [
              "0xabd6e7cb50984ff9c2f3e18a2660c3353dadf4e3291deeb275dae2cd1e44fe05",
            ],
          },
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "purchases[1][0]",
            "modified": true,
            "next": {
              "decoded": 100n,
              "hex": "0x0000000000000000000000000000000000000000000000000000000000000064",
            },
            "path": [
              {
                "key": 1n,
                "keyType": "uint256",
                "kind": "mapping_key",
              },
              {
                "index": 0n,
                "kind": "array_index",
              },
            ],
            "slots": [
              "0x210afe6ebef982fa193bb4e17f9f236cdf09af7788627b5d54d9e3e4b100021b",
            ],
          },
        ],
        "type": "mapping(uint256 => uint256[])",
      },
    },
  },
}
`;

exports[`Mappings > should trace mapping with struct values slot access 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 10000000000000000000n,
      "modified": true,
      "next": 9999999999999375187n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": true,
      "next": 1,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "userInfo": {
        "kind": "mapping",
        "name": "userInfo",
        "trace": [
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "userInfo[0x0000000000000000000000000000000000000002].balance",
            "modified": true,
            "next": {
              "decoded": 1000n,
              "hex": "0x00000000000000000000000000000000000000000000000000000000000003e8",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "kind": "struct_field",
                "name": "balance",
              },
            ],
            "slots": [
              "0xc3a24b0501bd2c13a7e57f2db4369ec4c223447539fc0724a9d55ac4a06ebd4d",
            ],
          },
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "userInfo[0x0000000000000000000000000000000000000002].lastUpdate",
            "modified": true,
            "next": {
              "decoded": 12345n,
              "hex": "0x0000000000000000000000000000000000000000000000000000000000003039",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "kind": "struct_field",
                "name": "lastUpdate",
              },
            ],
            "slots": [
              "0xc3a24b0501bd2c13a7e57f2db4369ec4c223447539fc0724a9d55ac4a06ebd4e",
            ],
          },
          {
            "current": {
              "decoded": false,
              "hex": "0x00",
            },
            "fullExpression": "userInfo[0x0000000000000000000000000000000000000002].isActive",
            "modified": true,
            "next": {
              "decoded": true,
              "hex": "0x01",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "kind": "struct_field",
                "name": "isActive",
              },
            ],
            "slots": [
              "0xc3a24b0501bd2c13a7e57f2db4369ec4c223447539fc0724a9d55ac4a06ebd4f",
            ],
          },
        ],
        "type": "mapping(address => struct Mappings.UserInfo)",
      },
    },
  },
}
`;

exports[`Mappings > should trace nested mapping slot access 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 10000000000000000000n,
      "modified": true,
      "next": 9999999999999687198n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": true,
      "next": 1,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "allowances": {
        "kind": "mapping",
        "name": "allowances",
        "trace": [
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "allowances[0x0000000000000000000000000000000000000001][0x0000000000000000000000000000000000000002]",
            "modified": true,
            "next": {
              "decoded": 1000n,
              "hex": "0x00000000000000000000000000000000000000000000000000000000000003e8",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000001",
                "keyType": "address",
                "kind": "mapping_key",
              },
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
            ],
            "slots": [
              "0x58e76cff22dd72278c8f84685a17f449f02ff85d2e9a03f82022b6f395640860",
            ],
          },
        ],
        "type": "mapping(address => mapping(address => uint256))",
      },
    },
  },
}
`;

exports[`Mappings > should trace simple mapping slot access 1`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 10000000000000000000n,
      "modified": true,
      "next": 9999999999999690152n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": true,
      "next": 1,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "balances": {
        "kind": "mapping",
        "name": "balances",
        "trace": [
          {
            "current": {
              "decoded": 0n,
              "hex": "0x00",
            },
            "fullExpression": "balances[0x0000000000000000000000000000000000000002]",
            "modified": true,
            "next": {
              "decoded": 1000n,
              "hex": "0x00000000000000000000000000000000000000000000000000000000000003e8",
            },
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
            ],
            "slots": [
              "0xabbb5caa7dda850e60932de0934eb1f9d0f59695050f761dc64e443e5030a569",
            ],
          },
        ],
        "type": "mapping(address => uint256)",
      },
    },
  },
}
`;

exports[`Mappings > should trace simple mapping slot access 2`] = `
{
  "0x0000000000000000000000000000000000000000": {
    "balance": {
      "current": 1000000000000000000000n,
      "modified": false,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {},
  },
  "0x0000000000000000000000000000000000000001": {
    "balance": {
      "current": 9999999999999690152n,
      "modified": true,
      "next": 9999999999999521158n,
    },
    "code": {
      "current": "0x",
      "modified": false,
    },
    "nonce": {
      "current": 1,
      "modified": true,
      "next": 2,
    },
    "storage": {},
  },
  "0x4d617070696e6773000000000000000000000000": {
    "balance": {
      "current": 0n,
      "modified": false,
    },
    "code": {
      "current": "0x608060405234801561000f575f5ffd5b50600436106100a7575f3560e01c80635eba6e471161006f5780635eba6e47146101735780636386c1c71461018f578063bae7a1f6146101bf578063da46098c146101db578063e30443bc146101f7578063f8b2cb4f14610213576100a7565b80630af4187d146100ab57806324074aab146100db5780632479915d146100f757806324fe7496146101275780632e0be22814610157575b5f5ffd5b6100c560048036038101906100c09190610851565b610243565b6040516100d291906108a7565b60405180910390f35b6100f560048036038101906100f091906108ea565b6102c5565b005b610111600480360381019061010c9190610961565b6103bf565b60405161011e9190610a43565b60405180910390f35b610141600480360381019061013c9190610a63565b610426565b60405161014e91906108a7565b60405180910390f35b610171600480360381019061016c9190610ac7565b610520565b005b61018d60048036038101906101889190610b05565b610559565b005b6101a960048036038101906101a49190610b43565b6105af565b6040516101b69190610bc8565b60405180910390f35b6101d960048036038101906101d49190610c0b565b610633565b005b6101f560048036038101906101f09190610c6f565b6106c7565b005b610211600480360381019061020c9190610b05565b610749565b005b61022d60048036038101906102289190610b43565b61078e565b60405161023a91906108a7565b60405180910390f35b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b8060025f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050505050565b606060045f8381526020019081526020015f2080548060200260200160405190810160405280929190818152602001828054801561041a57602002820191905f5260205f20905b815481526020019060010190808311610406575b50505050509050919050565b5f60025f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050949350505050565b60045f8381526020019081526020015f2081908060018154018082558091505060019003905f5260205f20015f90919091909150555050565b5f60035f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20905081815f0181905550428160010181905550505050565b6105b76107d3565b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f206040518060600160405290815f820154815260200160018201548152602001600282015f9054906101000a900460ff1615151515815250509050919050565b604051806060016040528084815260200183815260200182151581525060035f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f820151815f0155602082015181600101556040820151816002015f6101000a81548160ff02191690831515021790555090505050505050565b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550505050565b805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b60405180606001604052805f81526020015f81526020015f151581525090565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610820826107f7565b9050919050565b61083081610816565b811461083a575f5ffd5b50565b5f8135905061084b81610827565b92915050565b5f5f60408385031215610867576108666107f3565b5b5f6108748582860161083d565b92505060206108858582860161083d565b9150509250929050565b5f819050919050565b6108a18161088f565b82525050565b5f6020820190506108ba5f830184610898565b92915050565b6108c98161088f565b81146108d3575f5ffd5b50565b5f813590506108e4816108c0565b92915050565b5f5f5f5f5f60a08688031215610903576109026107f3565b5b5f6109108882890161083d565b95505060206109218882890161083d565b94505060406109328882890161083d565b93505060606109438882890161083d565b9250506080610954888289016108d6565b9150509295509295909350565b5f60208284031215610976576109756107f3565b5b5f610983848285016108d6565b91505092915050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b6109be8161088f565b82525050565b5f6109cf83836109b5565b60208301905092915050565b5f602082019050919050565b5f6109f18261098c565b6109fb8185610996565b9350610a06836109a6565b805f5b83811015610a36578151610a1d88826109c4565b9750610a28836109db565b925050600181019050610a09565b5085935050505092915050565b5f6020820190508181035f830152610a5b81846109e7565b905092915050565b5f5f5f5f60808587031215610a7b57610a7a6107f3565b5b5f610a888782880161083d565b9450506020610a998782880161083d565b9350506040610aaa8782880161083d565b9250506060610abb8782880161083d565b91505092959194509250565b5f5f60408385031215610add57610adc6107f3565b5b5f610aea858286016108d6565b9250506020610afb858286016108d6565b9150509250929050565b5f5f60408385031215610b1b57610b1a6107f3565b5b5f610b288582860161083d565b9250506020610b39858286016108d6565b9150509250929050565b5f60208284031215610b5857610b576107f3565b5b5f610b658482850161083d565b91505092915050565b5f8115159050919050565b610b8281610b6e565b82525050565b606082015f820151610b9c5f8501826109b5565b506020820151610baf60208501826109b5565b506040820151610bc26040850182610b79565b50505050565b5f606082019050610bdb5f830184610b88565b92915050565b610bea81610b6e565b8114610bf4575f5ffd5b50565b5f81359050610c0581610be1565b92915050565b5f5f5f5f60808587031215610c2357610c226107f3565b5b5f610c308782880161083d565b9450506020610c41878288016108d6565b9350506040610c52878288016108d6565b9250506060610c6387828801610bf7565b91505092959194509250565b5f5f5f60608486031215610c8657610c856107f3565b5b5f610c938682870161083d565b9350506020610ca48682870161083d565b9250506040610cb5868287016108d6565b915050925092509256fea2646970667358221220b43ab4d8e1d50e57e6a04341975f13ac0d66f0c9a4f0febd75038fc8e295e52564736f6c634300081c0033",
      "modified": false,
    },
    "nonce": {
      "current": 0,
      "modified": false,
    },
    "storage": {
      "balances": {
        "kind": "mapping",
        "name": "balances",
        "trace": [
          {
            "current": {
              "decoded": 1000n,
              "hex": "0x00000000000000000000000000000000000000000000000000000000000003e8",
            },
            "fullExpression": "balances[0x0000000000000000000000000000000000000002]",
            "modified": false,
            "path": [
              {
                "key": "0x0000000000000000000000000000000000000002",
                "keyType": "address",
                "kind": "mapping_key",
              },
            ],
            "slots": [
              "0xabbb5caa7dda850e60932de0934eb1f9d0f59695050f761dc64e443e5030a569",
            ],
          },
        ],
        "type": "mapping(address => uint256)",
      },
    },
  },
}
`;
